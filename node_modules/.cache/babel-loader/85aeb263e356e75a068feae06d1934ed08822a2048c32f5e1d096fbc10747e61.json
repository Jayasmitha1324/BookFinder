{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\admin\\\\Desktop\\\\Book_Finder\\\\book-finder-final\\\\book-finder\\\\src\\\\pages\\\\Home.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from 'react';\nimport SearchBar from '../components/SearchBar';\nimport BookCard from '../components/BookCard';\nimport BookDetailsModal from '../components/BookDetailsModal';\nimport { searchBooks } from '../api/openLibrary';\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nexport default function Home() {\n  _s();\n  const [query, setQuery] = useState('');\n  const [filters, setFilters] = useState({\n    author: '',\n    year: '',\n    language: ''\n  });\n  const [books, setBooks] = useState([]);\n  const [numFound, setNumFound] = useState(0);\n  const [page, setPage] = useState(1);\n  const [limit] = useState(12);\n  const [loading, setLoading] = useState(false);\n  const [error, setError] = useState('');\n  const [selectedBook, setSelectedBook] = useState(null);\n  const totalPages = Math.ceil(numFound / limit);\n\n  // Fetch books based on query, filters, and page\n  const fetchBooks = async () => {\n    if (!query.trim()) {\n      setBooks([]);\n      setNumFound(0);\n      return;\n    }\n    setLoading(true);\n    setError('');\n    try {\n      const data = await searchBooks({\n        q: query,\n        author: filters.author,\n        year: filters.year,\n        language: filters.language,\n        page,\n        limit\n      });\n      setBooks(data.docs || []);\n      setNumFound(data.numFound || 0);\n    } catch (err) {\n      setError('Failed to fetch books. Please try again.');\n      setBooks([]);\n      setNumFound(0);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  // Re-fetch books when query, filters, or page changes\n  useEffect(() => {\n    fetchBooks();\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [page]);\n\n  // When search is submitted, reset to page 1 and fetch\n  const handleSearch = (newQuery, newFilters) => {\n    setQuery(newQuery);\n    setFilters(newFilters);\n    setPage(1);\n    setTimeout(fetchBooks, 0);\n  };\n  const handleNext = () => {\n    if (page < totalPages) setPage(prev => prev + 1);\n  };\n  const handlePrev = () => {\n    if (page > 1) setPage(prev => prev - 1);\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"min-h-screen bg-gray-100 flex flex-col items-center py-8\",\n    children: [/*#__PURE__*/_jsxDEV(SearchBar, {\n      onSearch: handleSearch\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 76,\n      columnNumber: 7\n    }, this), error && /*#__PURE__*/_jsxDEV(\"p\", {\n      className: \"text-red-500 mt-4\",\n      children: error\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 78,\n      columnNumber: 17\n    }, this), loading ? /*#__PURE__*/_jsxDEV(\"p\", {\n      className: \"mt-8 text-gray-600\",\n      children: \"Loading...\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 81,\n      columnNumber: 9\n    }, this) : /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: (books === null || books === void 0 ? void 0 : books.length) > 0 ? /*#__PURE__*/_jsxDEV(_Fragment, {\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-6 mt-8 px-4\",\n          children: books.map((book, idx) => /*#__PURE__*/_jsxDEV(BookCard, {\n            book: book,\n            onClick: () => setSelectedBook(book)\n          }, `${book.key}-${idx}`, false, {\n            fileName: _jsxFileName,\n            lineNumber: 88,\n            columnNumber: 19\n          }, this))\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 86,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex items-center justify-center gap-6 mt-8\",\n          children: [/*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: handlePrev,\n            disabled: page === 1,\n            className: `px-4 py-2 rounded ${page === 1 ? 'bg-gray-300' : 'bg-blue-500 text-white hover:bg-blue-600'}`,\n            children: \"Prev\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 93,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"text-gray-700\",\n            children: [\"Page \", page, \" / \", totalPages || 1]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 101,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: handleNext,\n            disabled: page >= totalPages,\n            className: `px-4 py-2 rounded ${page >= totalPages ? 'bg-gray-300' : 'bg-blue-500 text-white hover:bg-blue-600'}`,\n            children: \"Next\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 105,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 92,\n          columnNumber: 15\n        }, this)]\n      }, void 0, true) : !loading && query && /*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"mt-8 text-gray-600\",\n        children: \"No results found.\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 115,\n        columnNumber: 34\n      }, this)\n    }, void 0, false), selectedBook && /*#__PURE__*/_jsxDEV(BookDetailsModal, {\n      book: selectedBook,\n      onClose: () => setSelectedBook(null)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 121,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 75,\n    columnNumber: 5\n  }, this);\n}\n_s(Home, \"JOnLeOCk4XlARfV32OOjurHt46g=\");\n_c = Home;\nvar _c;\n$RefreshReg$(_c, \"Home\");","map":{"version":3,"names":["React","useState","useEffect","SearchBar","BookCard","BookDetailsModal","searchBooks","jsxDEV","_jsxDEV","Fragment","_Fragment","Home","_s","query","setQuery","filters","setFilters","author","year","language","books","setBooks","numFound","setNumFound","page","setPage","limit","loading","setLoading","error","setError","selectedBook","setSelectedBook","totalPages","Math","ceil","fetchBooks","trim","data","q","docs","err","handleSearch","newQuery","newFilters","setTimeout","handleNext","prev","handlePrev","className","children","onSearch","fileName","_jsxFileName","lineNumber","columnNumber","length","map","book","idx","onClick","key","disabled","onClose","_c","$RefreshReg$"],"sources":["C:/Users/admin/Desktop/Book_Finder/book-finder-final/book-finder/src/pages/Home.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport SearchBar from '../components/SearchBar';\nimport BookCard from '../components/BookCard';\nimport BookDetailsModal from '../components/BookDetailsModal';\nimport { searchBooks } from '../api/openLibrary';\n\nexport default function Home() {\n  const [query, setQuery] = useState('');\n  const [filters, setFilters] = useState({ author: '', year: '', language: '' });\n  const [books, setBooks] = useState([]);\n  const [numFound, setNumFound] = useState(0);\n  const [page, setPage] = useState(1);\n  const [limit] = useState(12);\n  const [loading, setLoading] = useState(false);\n  const [error, setError] = useState('');\n  const [selectedBook, setSelectedBook] = useState(null);\n\n  const totalPages = Math.ceil(numFound / limit);\n\n  // Fetch books based on query, filters, and page\n  const fetchBooks = async () => {\n    if (!query.trim()) {\n      setBooks([]);\n      setNumFound(0);\n      return;\n    }\n\n    setLoading(true);\n    setError('');\n\n    try {\n      const data = await searchBooks({\n        q: query,\n        author: filters.author,\n        year: filters.year,\n        language: filters.language,\n        page,\n        limit\n      });\n\n      setBooks(data.docs || []);\n      setNumFound(data.numFound || 0);\n    } catch (err) {\n      setError('Failed to fetch books. Please try again.');\n      setBooks([]);\n      setNumFound(0);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  // Re-fetch books when query, filters, or page changes\n  useEffect(() => {\n    fetchBooks();\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [page]);\n\n  // When search is submitted, reset to page 1 and fetch\n  const handleSearch = (newQuery, newFilters) => {\n    setQuery(newQuery);\n    setFilters(newFilters);\n    setPage(1);\n    setTimeout(fetchBooks, 0);\n  };\n\n  const handleNext = () => {\n    if (page < totalPages) setPage((prev) => prev + 1);\n  };\n\n  const handlePrev = () => {\n    if (page > 1) setPage((prev) => prev - 1);\n  };\n\n  return (\n    <div className=\"min-h-screen bg-gray-100 flex flex-col items-center py-8\">\n      <SearchBar onSearch={handleSearch} />\n\n      {error && <p className=\"text-red-500 mt-4\">{error}</p>}\n\n      {loading ? (\n        <p className=\"mt-8 text-gray-600\">Loading...</p>\n      ) : (\n        <>\n          {books?.length > 0 ? (\n            <>\n              <div className=\"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-6 mt-8 px-4\">\n                {books.map((book, idx) => (\n                  <BookCard key={`${book.key}-${idx}`} book={book} onClick={() => setSelectedBook(book)} />\n                ))}\n              </div>\n\n              <div className=\"flex items-center justify-center gap-6 mt-8\">\n                <button\n                  onClick={handlePrev}\n                  disabled={page === 1}\n                  className={`px-4 py-2 rounded ${page === 1 ? 'bg-gray-300' : 'bg-blue-500 text-white hover:bg-blue-600'}`}\n                >\n                  Prev\n                </button>\n\n                <span className=\"text-gray-700\">\n                  Page {page} / {totalPages || 1}\n                </span>\n\n                <button\n                  onClick={handleNext}\n                  disabled={page >= totalPages}\n                  className={`px-4 py-2 rounded ${page >= totalPages ? 'bg-gray-300' : 'bg-blue-500 text-white hover:bg-blue-600'}`}\n                >\n                  Next\n                </button>\n              </div>\n            </>\n          ) : (\n            !loading && query && <p className=\"mt-8 text-gray-600\">No results found.</p>\n          )}\n        </>\n      )}\n\n      {selectedBook && (\n        <BookDetailsModal book={selectedBook} onClose={() => setSelectedBook(null)} />\n      )}\n    </div>\n  );\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}